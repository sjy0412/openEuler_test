"use strict";(self["webpackChunkopeneuler_test"]=self["webpackChunkopeneuler_test"]||[]).push([[122],{5266:function(e,t,l){l.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[t("el-popover",{attrs:{"visible-arrow":!1,width:"120px",placement:"bottom-end",trigger:"click","popper-class":"filter-table"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("el-checkbox-group",{staticClass:"filter-top",on:{change:e.handleChoose},model:{value:e.filterVal,callback:function(t){e.filterVal=t},expression:"filterVal"}},e._l(e.selectOption,(function(e){return t("el-checkbox",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1),t("div",{staticClass:"el-table-filter_bottom"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.filterTable}},[e._v(" 确认 ")]),t("el-button",{attrs:{type:"default",size:"small"},on:{click:e.cancel}},[e._v(" 重置 ")])],1),t("el-button",{staticClass:"setting",attrs:{slot:"reference",size:"mini",icon:"el-icon-setting"},slot:"reference"})],1)],1)},s=[],r={name:"FilterTable",props:["selectOption","filterSelected","headerInit"],data(){return{filterVal:[],visible:!1,filterChoose:[]}},created(){this.filterVal=this.filterSelected},watch:{filterSelected(e){this.filterSelected=e,this.filterVal=e,this.filterChoose=e}},methods:{handleChoose(e){this.filterChoose=e},filterTable(){this.$emit("handleFilter",this.filterChoose),this.visible=!1},cancel(){this.filterVal=this.headerInit,this.filterChoose=this.headerInit,this.filterTable()}}},i=r,o=l(1001),n=(0,o.Z)(i,a,s,!1,null,"fee41970",null),c=n.exports},9882:function(e,t,l){l.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[t("el-popover",{attrs:{"visible-arrow":!1,width:"120px",placement:"bottom-start",trigger:"click","popper-class":"filter-table"},model:{value:e.isShowFilter,callback:function(t){e.isShowFilter=t},expression:"isShowFilter"}},[t("el-checkbox-group",{on:{change:e.handleChoose},model:{value:e.filterVal,callback:function(t){e.filterVal=t},expression:"filterVal"}},[e._l(e.selectOption,(function(e){return t("el-checkbox",{key:e.value,attrs:{label:e.label,value:e.value}})})),t("div",{staticClass:"el-table-filter_bottom"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.filterTable}},[e._v(" 确认 ")]),t("el-button",{attrs:{type:"default",size:"small"},on:{click:e.cancel}},[e._v(" 重置 ")])],1)],2),t("p",{staticClass:"table-header",attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(e.headerLabel)+" "),0===e.filterSelected.length?t("img",{attrs:{src:l(2113),alt:""}}):t("img",{attrs:{src:l(3341),alt:""}})])],1)],1)},s=[],r={name:"FilterTable",props:["selectOption","headerLabel","filterSelected","filterKey"],data(){return{filterVal:[],isShowFilter:!1,filterChoose:[]}},created(){this.filterVal=this.getSelected()},watch:{filterSelected(e){console.log(e),this.filterSelected=e,this.filterVal=e,this.filterChoose[this.filterKey]=e}},methods:{handleChoose(e){this.filterChoose[this.filterKey]=e},getSelected(){let e=[];return this.filterVal.forEach((t=>{this.selectOption.forEach((l=>{t===l.value&&e.push(l.value)}))})),e},filterTable(){this.$emit("handleFilter",this.filterChoose),this.isShowFilter=!1},cancel(){this.filterVal=[],this.filterChoose[this.filterKey]=[],this.filterTable()}}},i=r,o=l(1001),n=(0,o.Z)(i,a,s,!1,null,"f8f8662c",null),c=n.exports},1122:function(e,t,l){l.r(t),l.d(t,{default:function(){return d}});l(6699);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"taskList-box"},[t("div",{staticClass:"list-box"},[t("div",{staticClass:"search-box"},[t("div"),t("div",{staticClass:"task-search"},[t("el-input",{attrs:{type:"text",placeholder:"请输入搜索内容",clearable:"","prefix-icon":"el-icon-search"},on:{change:e.searchData},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("FilterHeader",{attrs:{selectOption:e.headerLabel,headerInit:e.headerInit,filterSelected:e.headerSelected},on:{handleFilter:e.filterHeader}})],1)]),e.chooseList.length>0?t("div",{staticClass:"filter-list"},[t("span",{staticClass:"found"},[e._v(" 已找到 "),t("el-tag",{staticStyle:{"margin-left":"5px",color:"#252b3a"},attrs:{type:"round",size:"small"}},[e._v(" "+e._s(e.pagination.total)+" ")]),e._v(" : ")],1),e._l(e.chooseList,(function(l,a){return t("el-tooltip",{key:a,staticClass:"item",attrs:{effect:"light",content:l.value,placement:"top"}},[t("el-tag",{attrs:{type:"info",closable:""},on:{close:function(t){return e.handleClose(l)}}},[e._v(" "+e._s(l.value)+" ")])],1)})),t("span",{staticClass:"clear-all",on:{click:function(t){return e.clearAll()}}},[e._v("全部清除")])],2):e._e(),t("div",{staticClass:"task-table"},[t("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"light tooltip-end",resizable:"",border:""},on:{"filter-change":e.filterChange}},[t("template",{slot:"empty"},[t("img",{attrs:{src:l(5719)}})]),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskId",label:e.headerLabel[0].label,sortable:"",width:"106"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("router-link",{attrs:{to:{path:"/projectDetail",query:{testScene:l.row.testScene}}}},[t("p",{staticClass:"p-text taskId"},[e._v(e._s(l.row.taskId))])])]}}])}),e.headerSelected.includes(e.headerLabel[1].label)?t("el-table-column",{attrs:{prop:"testId",label:e.headerLabel[1].label,sortable:"","show-overflow-tooltip":"",width:"118"}}):e._e(),e.headerSelected.includes(e.headerLabel[2].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"testScene",width:"106"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.testScene,headerLabel:e.headerLabel[2].label,filterSelected:e.filterSelected.testScene,filterKey:"testScene"},on:{handleFilter:e.filterChange}})],1)}}],null,!1,3619461432)}):e._e(),e.headerSelected.includes(e.headerLabel[3].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskPhase",width:"136"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.taskPhase,headerLabel:e.headerLabel[3].label,filterSelected:e.filterSelected.taskPhase,filterKey:"taskPhase"},on:{handleFilter:e.filterChange}})],1)}},{key:"default",fn:function(l){return["等待分配服务器"===l.row.taskPhase?t("span",[t("el-tag",{staticStyle:{border:"1px solid #f97611"},attrs:{color:"#f97611",effect:"dark",type:"warning"}},[e._v(" "+e._s(l.row.taskPhase)+" ")])],1):e._e(),"测试中"===l.row.taskPhase||"测试中(第二轮)"===l.row.taskPhase?t("span",[t("el-tag",{staticStyle:{border:"1px solid #07f"},attrs:{color:"#07f",effect:"dark"}},[e._v(" "+e._s(l.row.taskPhase)+" ")])],1):e._e(),"服务器释放"===l.row.taskPhase?t("span",[t("el-tag",{staticStyle:{border:"1px solid #2a739d"},attrs:{color:"#2a739d",effect:"dark"}},[e._v(" "+e._s(l.row.taskPhase)+" ")])],1):e._e(),"测试完成"===l.row.taskPhase?t("span",[t("el-tag",{staticStyle:{border:"1px solid #24ab36"},attrs:{color:"#24ab36",effect:"dark"}},[e._v(" "+e._s(l.row.taskPhase)+" ")])],1):e._e(),"认证结束"===l.row.taskPhase?t("span",[t("el-tag",{staticStyle:{border:"1px solid #30b7bb"},attrs:{color:"#30b7bb",effect:"dark"}},[e._v(" "+e._s(l.row.taskPhase)+" ")])],1):e._e()]}}],null,!1,4226758949)}):e._e(),e.headerSelected.includes(e.headerLabel[4].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"status",width:"106",label:e.headerLabel[4].label},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{class:e.getClass(l.row.status)},[e._v(e._s(l.row.status?l.row.status:"-"))])]}}],null,!1,3545236445)}):e._e(),e.headerSelected.includes(e.headerLabel[5].label)?t("el-table-column",{attrs:{prop:"submitDate",label:e.headerLabel[5].label,width:"110",sortable:"","show-overflow-tooltip":""}}):e._e(),e.headerSelected.includes(e.headerLabel[6].label)?t("el-table-column",{attrs:{prop:"serverModel",width:"114","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.serverModel,headerLabel:e.headerLabel[6].label,filterSelected:e.filterSelected.serverModel,filterKey:"serverModel"},on:{handleFilter:e.filterChange}})],1)}}],null,!1,3070135518)}):e._e(),e.headerSelected.includes(e.headerLabel[7].label)?t("el-table-column",{attrs:{prop:"OS","show-overflow-tooltip":"","column-key":"OS",width:"106"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.OS,headerLabel:e.headerLabel[7].label,filterSelected:e.filterSelected.OS,filterKey:"OS"},on:{handleFilter:e.filterChange}})],1)}}],null,!1,515116009)}):e._e(),e.headerSelected.includes(e.headerLabel[8].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"serverIp",label:e.headerLabel[8].label}}):e._e(),e.headerSelected.includes(e.headerLabel[9].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"testTime",label:e.headerLabel[9].label,sortable:"",width:"106"}}):e._e(),e.headerSelected.includes(e.headerLabel[10].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"testDuration",label:e.headerLabel[10].label,sortable:"",width:"106"}}):e._e(),e.headerSelected.includes(e.headerLabel[11].label)?t("el-table-column",{attrs:{prop:"operate",label:e.headerLabel[11].label,minWidth:"220","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticClass:"opera-btn"},[l.row.taskPhase.includes("测试中")&&"测试失败"===l.row.status?t("button",[e._v(" 一键重跑 ")]):e._e(),"等待分配服务器"===l.row.taskPhase||l.row.taskPhase.includes("测试中")?t("button",[e._v(" 终止测试 ")]):e._e(),"认证结束"===l.row.taskPhase||"测试完成"===l.row.taskPhase&&"测试成功"!==l.row.status?e._e():t("button",[e._v(" 重新测试 ")]),"测试完成"===l.row.taskPhase&&"测试成功"===l.row.status||"服务器释放"===l.row.taskPhase||"认证结束"===l.row.taskPhase?t("button",[e._v(" 预览报告 ")]):e._e(),"测试完成"===l.row.taskPhase&&"测试成功"===l.row.status||"服务器释放"===l.row.taskPhase||"认证结束"===l.row.taskPhase?t("button",[e._v(" 下载报告 ")]):e._e(),"测试完成"===l.row.taskPhase&&"测试成功"!==l.row.status?t("button",[e._v(" 填写原因 ")]):e._e(),"测试完成"===l.row.taskPhase&&"测试成功"!==l.row.status?t("button",[e._v(" 重跑测试 ")]):e._e(),"测试完成"===l.row.taskPhase&&"测试成功"!==l.row.status?t("el-popover",{attrs:{placement:"bottom-start",trigger:"click",width:"88","popper-class":"popper-more"}},[t("div",{staticClass:"more-btn"},[t("p",[e._v("重新测试")]),t("p",[e._v("预览报告")]),t("p",[e._v("下载报告")])]),t("div",{staticClass:"opera-more",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v("更多")]),t("i",{staticClass:"el-icon-caret-bottom"})])]):e._e()],1)]}}],null,!1,2051674916)}):e._e()],2),t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},s=[],r=l(9882),i=l(5266),o={name:"TaskList",components:{FilterTable:r.Z,FilterHeader:i.Z},data(){return{keyword:"",tableData:[{taskId:"20220711002",testId:"王小虎",testScene:"整机与板卡",taskPhase:"等待分配服务器",status:"排队中",submitDate:" 21.128.12.13",serverModel:"TaiShan200",OS:"王小虎",serverIp:" 21.128.12.13",testTime:"20220711003",testDuration:"王小虎",testDuration:"20220711003"},{taskId:"20220711004",testId:"王小虎",testScene:"openEuler商业发行版",taskPhase:"测试中",status:"已分配",submitDate:" 21.128.12.13",serverModel:"TaiShan200",OS:"王小虎",serverIp:" 21.128.12.13",testTime:"20220711003",testDuration:"王小虎"},{taskId:"20220711001",testId:"王小虎",testScene:"商业软件",taskPhase:"测试中(第二轮)",status:"测试失败",submitDate:"1234",serverModel:"TaiShan200",OS:"王小虎",serverIp:" 21.128.12.13",testTime:"20220711003",testDuration:"王小虎"},{taskId:"20220711003",testId:"王小虎",testScene:"商业软件",taskPhase:"测试完成",status:"测试失败",submitDate:" 21.128.12.13",serverModel:"20220711003",OS:"王小虎",serverIp:" 22.128.12.13",testTime:"20220711003",testDuration:"王小虎"},{taskId:"20220711003",testId:"王小虎",testScene:"openEuler商业发行版",taskPhase:"测试完成",status:"测试成功",submitDate:" 21.128.12.13",serverModel:"20220711003",OS:"王小虎",serverIp:" 21.128.12.13",testTime:"20220711003",testDuration:"王小虎"},{taskId:"20220711003",testId:"王小虎",testScene:"整机与板卡",taskPhase:"服务器释放",status:"已释放",submitDate:"20220711003",serverModel:"20220711003",OS:"王小虎",serverIp:"20220711003",testTime:"20220711003",testDuration:"王小虎"}],headerLabel:[{label:"方案ID",value:"方案ID",disabled:!0},{label:"测试任务ID",value:"测试任务ID",disabled:!1},{label:"测试场景",value:"测试场景",disabled:!1},{label:"任务阶段",value:"任务阶段",disabled:!1},{label:"状态",value:"状态",disabled:!1},{label:"提交时间",value:"提交时间",disabled:!1},{label:"服务器型号",value:"服务器型号",disabled:!1},{label:"操作系统",value:"操作系统",disabled:!1},{label:"服务器IP",value:"服务器IP",disabled:!1},{label:"测试时间",value:"测试时间",disabled:!1},{label:"测试时长",value:"测试时长",disabled:!1},{label:"操作",value:"操作",disabled:!1}],headerInit:["方案ID","测试任务ID","测试场景","任务阶段","状态","提交时间","服务器型号","操作系统","服务器IP","测试时间","测试时长","操作"],headerSelected:["方案ID","测试任务ID","测试场景","任务阶段","状态","提交时间","服务器型号","操作系统","服务器IP","测试时间","测试时长","操作"],filters:{testScene:[],taskPhase:[],serverModel:[],OS:[]},filterSelected:{testScene:[],taskPhase:[],serverModel:[],OS:[]},chooseList:[],pagination:{total:100,currentPage:1,layout:"total, size, prev, pager, next, jumper",pageSizes:[10,20,30,50],pageSize:10}}},created(){this.tableData.forEach((e=>{this.filters.testScene.push({value:e.testScene,label:e.testScene})})),this.filters.taskPhase=[{value:"任务1",label:"任务1"},{value:"任务2",label:"任务2"}],this.filters.serverModel=[{value:"型号1",label:"型号1"},{value:"型号2",label:"型号2"}],this.filters.OS=[{value:"OS1",label:"OS1"},{value:"OS2",label:"OS2"}]},methods:{handleSizeChange(){},handleCurrentChange(){},getClass(e){let t="";switch(e){case"已分配":case"已释放":case"测试成功":t="status status1";break;case"测试失败":t="status status2";break;default:t="status";break}return t},filterHeader(e){this.headerSelected=e},filterChange(e){if(this.chooseList=this.chooseList.filter((t=>-1===Object.keys(e)[0].indexOf(t.key))),e.testScene){if(e.testScene.length>0){let t=this.handleFilter(e,"testScene");this.chooseList.push(t)}this.filterSelected.testScene=e.testScene}if(e.taskPhase){if(e.taskPhase.length>0){let t=this.handleFilter(e,"taskPhase");this.chooseList.push(t)}this.filterSelected.taskPhase=e.taskPhase}if(e.serverModel){if(e.serverModel.length>0){let t=this.handleFilter(e,"serverModel");this.chooseList.push(t)}this.filterSelected.serverModel=e.serverModel}if(e.OS){if(e.OS.length>0){let t=this.handleFilter(e,"OS");this.chooseList.push(t)}this.filterSelected.OS=e.OS}},handleFilter(e,t){let l="";l="testScene"===t?"测试场景：":"taskPhase"===t?"任务阶段：":"serverModel"===t?"服务器型号：":"操作系统：",e[t].forEach(((a,s)=>{l+=a,s<e[t].length-1&&(l+=", ")}));let a={key:t,value:l};return a},handleClose(e){this.chooseList=this.chooseList.filter((t=>t.key!==e.key)),this.filterSelected[e.key]=[]},clearAll(){this.chooseList=[],this.filterSelected={testScene:[],taskPhase:[],serverModel:[],OS:[]}},searchData(){}}},n=o,c=l(1001),h=(0,c.Z)(n,a,s,!1,null,"157d79f7",null),d=h.exports},5719:function(e,t,l){e.exports=l.p+"img/noData.cac85dd7.svg"},2113:function(e,t,l){e.exports=l.p+"img/screen1.c79c490f.svg"},3341:function(e,t,l){e.exports=l.p+"img/screen3.32156a36.svg"}}]);
//# sourceMappingURL=122.d749dec7.js.map