"use strict";(self["webpackChunkopeneuler_test"]=self["webpackChunkopeneuler_test"]||[]).push([[65],{5266:function(e,t,a){a.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[t("el-popover",{attrs:{"visible-arrow":!1,width:"120px",placement:"bottom-end",trigger:"click","popper-class":"filter-table"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("el-checkbox-group",{staticClass:"filter-top",on:{change:e.handleChoose},model:{value:e.filterVal,callback:function(t){e.filterVal=t},expression:"filterVal"}},e._l(e.selectOption,(function(e){return t("el-checkbox",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1),t("div",{staticClass:"el-table-filter_bottom"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.filterTable}},[e._v(" 确认 ")]),t("el-button",{attrs:{type:"default",size:"small"},on:{click:e.cancel}},[e._v(" 重置 ")])],1),t("el-button",{staticClass:"setting",attrs:{slot:"reference",size:"mini",icon:"el-icon-setting"},slot:"reference"})],1)],1)},s=[],r={name:"FilterTable",props:["selectOption","filterSelected","headerInit"],data(){return{filterVal:[],visible:!1,filterChoose:[]}},created(){this.filterVal=this.filterSelected},watch:{filterSelected(e){this.filterSelected=e,this.filterVal=e,this.filterChoose=e}},methods:{handleChoose(e){this.filterChoose=e},filterTable(){this.$emit("handleFilter",this.filterChoose),this.visible=!1},cancel(){this.filterVal=this.headerInit,this.filterChoose=this.headerInit,this.filterTable()}}},o=r,i=a(1001),n=(0,i.Z)(o,l,s,!1,null,"fee41970",null),c=n.exports},9882:function(e,t,a){a.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[t("el-popover",{attrs:{"visible-arrow":!1,width:"120px",placement:"bottom-start",trigger:"click","popper-class":"filter-table"},model:{value:e.isShowFilter,callback:function(t){e.isShowFilter=t},expression:"isShowFilter"}},[t("el-checkbox-group",{on:{change:e.handleChoose},model:{value:e.filterVal,callback:function(t){e.filterVal=t},expression:"filterVal"}},[e._l(e.selectOption,(function(e){return t("el-checkbox",{key:e.value,attrs:{label:e.label,value:e.value}})})),t("div",{staticClass:"el-table-filter_bottom"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.filterTable}},[e._v(" 确认 ")]),t("el-button",{attrs:{type:"default",size:"small"},on:{click:e.cancel}},[e._v(" 重置 ")])],1)],2),t("p",{staticClass:"table-header",attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(e.headerLabel)+" "),0===e.filterSelected.length?t("img",{attrs:{src:a(2113),alt:""}}):t("img",{attrs:{src:a(3341),alt:""}})])],1)],1)},s=[],r={name:"FilterTable",props:["selectOption","headerLabel","filterSelected","filterKey"],data(){return{filterVal:[],isShowFilter:!1,filterChoose:[]}},created(){this.filterVal=this.getSelected()},watch:{filterSelected(e){console.log(e),this.filterSelected=e,this.filterVal=e,this.filterChoose[this.filterKey]=e}},methods:{handleChoose(e){this.filterChoose[this.filterKey]=e},getSelected(){let e=[];return this.filterVal.forEach((t=>{this.selectOption.forEach((a=>{t===a.value&&e.push(a.value)}))})),e},filterTable(){this.$emit("handleFilter",this.filterChoose),this.isShowFilter=!1},cancel(){this.filterVal=[],this.filterChoose[this.filterKey]=[],this.filterTable()}}},o=r,i=a(1001),n=(0,i.Z)(o,l,s,!1,null,"f8f8662c",null),c=n.exports},6065:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});a(6699);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"taskList-box"},[t("div",{staticClass:"list-box"},[t("div",{staticClass:"search-box"},[t("div"),t("div",{staticClass:"task-search"},[t("el-input",{attrs:{type:"text",placeholder:"请输入搜索内容",clearable:"","prefix-icon":"el-icon-search"},on:{change:e.searchData},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("FilterHeader",{attrs:{selectOption:e.headerLabel,headerInit:e.headerInit,filterSelected:e.headerSelected},on:{handleFilter:e.filterHeader}})],1)]),e.chooseList.length>0?t("div",{staticClass:"filter-list"},[t("span",{staticClass:"found"},[e._v(" 已找到 "),t("el-tag",{staticStyle:{"margin-left":"5px",color:"#252b3a"},attrs:{type:"round",size:"small"}},[e._v(" "+e._s(e.pagination.total)+" ")]),e._v(" : ")],1),e._l(e.chooseList,(function(a,l){return t("el-tooltip",{key:l,staticClass:"item",attrs:{effect:"light",content:a.value,placement:"top"}},[t("el-tag",{attrs:{type:"info",closable:""},on:{close:function(t){return e.handleClose(a)}}},[e._v(" "+e._s(a.value)+" ")])],1)})),t("span",{staticClass:"clear-all",on:{click:function(t){return e.clearAll()}}},[e._v("全部清除")])],2):e._e(),t("div",{staticClass:"task-table"},[t("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"light tooltip-end",resizable:"",sortable:"custom",border:""},on:{"filter-change":e.filterChange,"sort-change":e.handleSort}},[t("template",{slot:"empty"},[t("img",{attrs:{src:a(5719)}})]),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"projectId",label:e.headerLabel[0].label,sortable:"",width:"106"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{attrs:{to:{path:"/projectDetail",query:{projectId:a.row.projectId,requestId:a.row.requestId,testScenario:a.row.testScenario}}}},[t("p",{staticClass:"p-text projectId"},[e._v(e._s(a.row.projectId?a.row.projectId:"-"))])])]}}])}),e.headerSelected.includes(e.headerLabel[1].label)?t("el-table-column",{attrs:{prop:"requestId",label:e.headerLabel[1].label,sortable:"","show-overflow-tooltip":"",width:"118"}}):e._e(),e.headerSelected.includes(e.headerLabel[2].label)?t("el-table-column",{attrs:{prop:"solutionName",label:e.headerLabel[2].label,"show-overflow-tooltip":"",width:"118"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.solutionName?a.row.solutionName:"-"))])]}}],null,!1,4150086548)}):e._e(),e.headerSelected.includes(e.headerLabel[3].label)?t("el-table-column",{attrs:{prop:"companyName",label:e.headerLabel[3].label,"show-overflow-tooltip":"",width:"118"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.companyName?a.row.companyName:"-"))])]}}],null,!1,2994122036)}):e._e(),e.headerSelected.includes(e.headerLabel[4].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"testScenario",width:"106"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.testScenario,headerLabel:e.headerLabel[4].label,filterSelected:e.filterSelected.testScenario,filterKey:"testScenario"},on:{handleFilter:e.filterChange}})],1)}},{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.testScenario?a.row.testScenario:"-"))])]}}],null,!1,3008577587)}):e._e(),e.headerSelected.includes(e.headerLabel[5].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"testOrganization",width:"106"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.testOrganization,headerLabel:e.headerLabel[5].label,filterSelected:e.filterSelected.testOrganization,filterKey:"testOrganization"},on:{handleFilter:e.filterChange}})],1)}},{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.testOrganization?a.row.testOrganization:"-"))])]}}],null,!1,162212743)}):e._e(),e.headerSelected.includes(e.headerLabel[6].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskStatus",width:"136"},scopedSlots:e._u([{key:"header",fn:function({}){return t("div",{},[t("FilterTable",{attrs:{selectOption:e.filters.taskStatus,headerLabel:e.headerLabel[6].label,filterSelected:e.filterSelected.taskStatus,filterKey:"taskStatus"},on:{handleFilter:e.filterChange}})],1)}},{key:"default",fn:function(a){return[t("span",[t("el-tag",{style:e.getStyle(a.row.taskStatus),attrs:{effect:"dark"}},[e._v(" "+e._s(a.row.taskStatus?a.row.taskStatus:"")+" ")])],1)]}}],null,!1,1643286213)}):e._e(),e.headerSelected.includes(e.headerLabel[7].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"serverStatus",width:"106",label:e.headerLabel[7].label},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:e.getClass(a.row.serverStatus)},[e._v(e._s(a.row.serverStatus?a.row.serverStatus:"-"))])]}}],null,!1,1337196120)}):e._e(),e.headerSelected.includes(e.headerLabel[8].label)?t("el-table-column",{attrs:{prop:"submitDate",label:e.headerLabel[8].label,width:"110",sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.submitDate?a.row.submitDate:"-"))])]}}],null,!1,247885140)}):e._e(),e.headerSelected.includes(e.headerLabel[9].label)?t("el-table-column",{attrs:{prop:"serverModel",width:"114","show-overflow-tooltip":"",label:e.headerLabel[9].label},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.serverModel?a.row.serverModel:"-"))])]}}],null,!1,2499857972)}):e._e(),e.headerSelected.includes(e.headerLabel[10].label)?t("el-table-column",{attrs:{prop:"OS","show-overflow-tooltip":"","column-key":"OS",width:"106",label:e.headerLabel[10].label},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.osName?a.row.osName+" "+a.row.osVersion:"-"))])]}}],null,!1,130345352)}):e._e(),e.headerSelected.includes(e.headerLabel[11].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"serverIp",label:e.headerLabel[11].label},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.serverIp?a.row.serverIp:"-"))])]}}],null,!1,3388113044)}):e._e(),e.headerSelected.includes(e.headerLabel[12].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"startTime",label:e.headerLabel[12].label,sortable:"",width:"106"}}):e._e(),e.headerSelected.includes(e.headerLabel[13].label)?t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"duration",label:e.headerLabel[13].label,sortable:"",width:"106"}}):e._e(),e.headerSelected.includes(e.headerLabel[14].label)?t("el-table-column",{attrs:{prop:"operate",label:e.headerLabel[14].label,minWidth:"220","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"opera-btn"},[a.row.taskStatus.includes("测试中")&&"测试失败"===a.row.serverStatus?t("button",[e._v(" 一键重跑 ")]):e._e(),"测试完成"!==a.row.taskStatus?t("button",[e._v(" 终止测试 ")]):e._e(),"认证结束"===a.row.taskStatus||"测试完成"===a.row.taskStatus&&"测试成功"!==a.row.serverStatus?e._e():t("button",[e._v(" 重新测试 ")]),"测试完成"===a.row.taskStatus&&"测试成功"===a.row.serverStatus||"服务器释放"===a.row.taskStatus||"认证结束"===a.row.taskStatus?t("button",[e._v(" 预览报告 ")]):e._e(),"测试完成"===a.row.taskStatus&&"测试成功"===a.row.serverStatus||"服务器释放"===a.row.taskStatus||"认证结束"===a.row.taskStatus?t("button",[e._v(" 下载报告 ")]):e._e(),"测试完成"===a.row.taskStatus&&"测试成功"!==a.row.serverStatus?t("button",[e._v(" 填写原因 ")]):e._e(),"测试完成"===a.row.taskStatus&&"测试成功"!==a.row.serverStatus?t("button",[e._v(" 重跑测试 ")]):e._e(),"测试完成"===a.row.taskStatus&&"测试成功"!==a.row.serverStatus?t("el-popover",{attrs:{placement:"bottom-start",trigger:"click",width:"88","popper-class":"popper-more"}},[t("div",{staticClass:"more-btn"},[t("p",[e._v("重新测试")]),t("p",[e._v("预览报告")]),t("p",[e._v("下载报告")])]),t("div",{staticClass:"opera-more",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v("更多")]),t("i",{staticClass:"el-icon-caret-bottom"})])]):e._e()],1)]}}],null,!1,310634438)}):e._e()],2),t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},s=[],r=a(9882),o=a(5266),i=a(6991),n=a(9691),c={name:"TaskList",components:{FilterTable:r.Z,FilterHeader:o.Z},data(){return{keyword:"",tableData:[],headerLabel:[{label:"方案ID",value:"方案ID",disabled:!0},{label:"测试任务ID",value:"测试任务ID",disabled:!1},{label:"方案名称",value:"方案名称",disabled:!1},{label:"公司名称",value:"公司名称",disabled:!1},{label:"测试场景",value:"测试场景",disabled:!1},{label:"测试机构",value:"测试机构",disabled:!1},{label:"测试状态",value:"测试状态",disabled:!1},{label:"服务器状态",value:"服务器状态",disabled:!1},{label:"提交时间",value:"提交时间",disabled:!1},{label:"服务器型号",value:"服务器型号",disabled:!1},{label:"操作系统",value:"操作系统",disabled:!1},{label:"服务器IP",value:"服务器IP",disabled:!1},{label:"测试时间",value:"测试时间",disabled:!1},{label:"测试时长",value:"测试时长",disabled:!1},{label:"操作",value:"操作",disabled:!1}],headerInit:["方案ID","测试任务ID","方案名称","公司名称","测试场景","测试机构","测试状态","服务器状态","提交时间","服务器型号","操作系统","服务器IP","测试时间","测试时长","操作"],headerSelected:["方案ID","测试任务ID","方案名称","公司名称","测试场景","测试机构","测试状态","服务器状态","服务器型号","操作系统","服务器IP","操作"],filters:{testScenario:[],testOrganization:[],taskStatus:[]},filterSelected:{testScenario:[],testOrganization:[],taskStatus:[]},chooseList:[],pagination:{total:0,currentPage:1,layout:"total, size, prev, pager, next, jumper",pageSizes:[10,20,30,50],pageSize:10},params:{testScenario:[],serverType:[],testOrganizations:[],keyword:"",sortType:"",sortKey:"",pageNo:1,pageSize:10}}},created(){this.filters.taskStatus=[{value:"任务1",label:"任务1"},{value:"任务2",label:"任务2"}],this.getList()},methods:{handleSizeChange(){},handleCurrentChange(){},getClass(e){let t="";switch(e){case"排队中":t="serverStatus status1";break;case"已分配":t="serverStatus status2";break;case"待回收":t="serverStatus status3";break;case"已回收":t="serverStatus status4";break;default:t="serverStatus";break}return t},getStyle(e){let t={};switch(e.includes("测试中")?t={border:"1px solid #07f",backgroundColor:"#07f"}:e.includes("测试失败")&&(t={border:"1px solid #e32020",backgroundColor:"#e32020"}),e){case"等待分配服务器":t={border:"1px solid #ebaf00",backgroundColor:"#ebaf00"};break;case"已分配服务器":t={border:"1px solid #2db47c",backgroundColor:"#ebaf00"};break;case"初始化服务器":t={border:"1px solid #81ba06",backgroundColor:"#81ba06"};break;case"安装驱动":t={border:"1px solid #52a3ff",backgroundColor:"#52a3ff"};break;case"测试完成":t={border:"1px solid #30b7bb",backgroundColor:"#30b7bb"};break;case"认证结束":t={border:"1px solid #24ab36",backgroundColor:"#24ab36"};break;case"服务器释放":t={border:"1px solid #2a739d",backgroundColor:"#2a739d"};break;default:break}return t},filterHeader(e){this.headerSelected=e},filterChange(e){if(this.chooseList=this.chooseList.filter((t=>-1===Object.keys(e)[0].indexOf(t.key))),e.testScenario){if(e.testScenario.length>0){let t=this.handleFilter(e,"testScenario");this.chooseList.push(t)}this.filterSelected.testScenario=e.testScenario}if(e.taskStatus){if(e.taskStatus.length>0){let t=this.handleFilter(e,"taskStatus");this.chooseList.push(t)}this.filterSelected.taskStatus=e.taskStatus}if(e.testOrganization){if(e.testOrganization.length>0){let t=this.handleFilter(e,"testOrganization");this.chooseList.push(t)}this.filterSelected.testOrganization=e.testOrganization}},handleFilter(e,t){let a="";a="testScenario"===t?"测试场景：":"taskStatus"===t?"任务阶段：":"testOrganization"===t?"测试机构":"操作系统：",e[t].forEach(((l,s)=>{a+=l,s<e[t].length-1&&(a+=", ")}));let l={key:t,value:a};return l},handleClose(e){this.chooseList=this.chooseList.filter((t=>t.key!==e.key)),this.filterSelected[e.key]=[]},clearAll(){this.chooseList=[],this.filterSelected={testScenario:[],taskStatus:[],testOrganization:[]}},searchData(e){this.params.keyword=e,this.getList()},handleSort(e){this.params.sortKey=e.prop,this.params.sortType="descending"===e?"desc":"asc",this.getList()},getList(){i.d.getList(this.params).then((e=>{e.data.code===this.$statusCode.LOGIN_FAILED?(0,n.K)():e.data.code===this.$statusCode.SUCCESS?(this.tableData=e.data.body.list,this.pagination.total=e.data.body.total,this.tableData.forEach((e=>{}))):this.$message({message:e.data.msg,type:"error"})}))}}},d=c,u=a(1001),h=(0,u.Z)(d,l,s,!1,null,"7d29057a",null),b=h.exports},9691:function(e,t,a){a.d(t,{K:function(){return r}});var l=a(8499),s=a(1120);function r(){l.MessageBox.confirm("当前登录超时，请重新登录!","会话过期",{confirmButtonText:"确定",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1}).then((()=>{s.Z.push("/login")})).catch((()=>{}))}},6991:function(e,t,a){a.d(t,{d:function(){return s}});var l=a(8042);const s={getList(e){const t="/rest/v1/test-task/test-list";return l.Z.post(t,e)},setFailReason(e){const t="/rest/v1/test-task/set-failure-reason";return l.Z.post(t,e)},terminateTest(e){const t="/rest/v1/test-task/terminate-test";return l.Z.post(t,e)},getPreview(e,t){const a=`/rest/v1/test-task/${e}/test-preview?requestId=${t}`;return l.Z.get(a)}}},5719:function(e,t,a){e.exports=a.p+"img/noData.cac85dd7.svg"},2113:function(e,t,a){e.exports=a.p+"img/screen1.c79c490f.svg"},3341:function(e,t,a){e.exports=a.p+"img/screen3.32156a36.svg"}}]);
//# sourceMappingURL=65.18f5c75d.js.map