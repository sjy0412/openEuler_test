"use strict";(self["webpackChunkopeneuler_test"]=self["webpackChunkopeneuler_test"]||[]).push([[779],{2779:function(s,r,a){a.r(r),a.d(r,{default:function(){return D}});var o=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login-container"},[s("img",{staticClass:"login-bg",attrs:{src:a(2170)}}),s("div",{staticClass:"login-box"},[s("div",{staticClass:"login-title"},[e.changePassword?e._e():s("p",{staticClass:"small-title"},[e._v("欢迎使用")]),e.changePassword?e._e():s("p",{staticClass:"big-title"},[e._v("openEuler认证报告生成平台管理")]),e.changePassword?s("p",{staticClass:"change-title big-title"},[e._v("修改密码")]):e._e()]),e.changePassword?e._e():s("LoginForm"),e.changePassword?s("ChangePassword"):e._e()],1)])},t=[],i=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login-form"},[s("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"status-icon":""}},[s("el-form-item",{attrs:{prop:"account"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.formData.account&&e.clearShow.isClear,expression:"formData.account && clearShow.isClear"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.formData.account=""}}}),s("el-input",{attrs:{type:"text",placeholder:"请输入账号"},on:{focus:function(s){e.clearShow.isClear=!0},blur:function(s){e.clearShow.isClear=!1}},model:{value:e.formData.account,callback:function(s){e.$set(e.formData,"account",s)},expression:"formData.account"}})],1),s("el-form-item",{attrs:{prop:"oldPassword"}},[s("img",{class:["eye-img",e.eyesShow.isShow1?"eye-show":"eye-hide"],attrs:{src:e.eyesShow.isShow1?e.eyes.show:e.eyes.hide},on:{click:function(s){e.eyesShow.isShow1=!e.eyesShow.isShow1}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.formData.oldPassword&&e.clearShow.isClear1,expression:"formData.oldPassword && clearShow.isClear1"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.formData.oldPassword=""}}}),s("el-input",{staticClass:"password",attrs:{type:e.eyesShow.isShow1?"text":"password",placeholder:"旧密码"},on:{focus:function(s){e.clearShow.isClear1=!0},blur:function(s){e.clearShow.isClear1=!1}},model:{value:e.formData.oldPassword,callback:function(s){e.$set(e.formData,"oldPassword",s)},expression:"formData.oldPassword"}})],1),s("el-form-item",{attrs:{prop:"newPassword"}},[s("img",{class:["eye-img",e.eyesShow.isShow2?"eye-show":"eye-hide"],attrs:{src:e.eyesShow.isShow2?e.eyes.show:e.eyes.hide},on:{click:function(s){e.eyesShow.isShow2=!e.eyesShow.isShow2}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.formData.newPassword&&e.isClear,expression:"formData.newPassword && isClear"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.formData.newPassword=""}}}),s("el-input",{staticClass:"password",attrs:{type:e.eyesShow.isShow2?"text":"password",placeholder:"新密码"},on:{focus:function(s){e.isClear=!0},blur:function(s){e.isClear=!1}},model:{value:e.formData.newPassword,callback:function(s){e.$set(e.formData,"newPassword",s)},expression:"formData.newPassword"}})],1),s("el-form-item",{attrs:{prop:"confirmPW"}},[s("img",{class:["eye-img",e.eyesShow.isShow3?"eye-show":"eye-hide"],attrs:{src:e.eyesShow.isShow3?e.eyes.show:e.eyes.hide},on:{click:function(s){e.eyesShow.isShow3=!e.eyesShow.isShow3}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.formData.confirmPw&&e.clearShow.isClear3,expression:"formData.confirmPw && clearShow.isClear3"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.formData.confirmPw=""}}}),s("el-input",{staticClass:"password",attrs:{type:e.eyesShow.isShow3?"text":"password",placeholder:"确认密码"},on:{focus:function(s){e.clearShow.isClear3=!0},blur:function(s){e.clearShow.isClear3=!1}},model:{value:e.formData.confirmPW,callback:function(s){e.$set(e.formData,"confirmPW",s)},expression:"formData.confirmPW"}})],1),s("el-form-item",[s("el-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(s){return e.handleCancel()}}},[e._v("取消")]),s("el-button",{staticClass:"sure-btn",attrs:{type:"primary"},on:{click:function(s){return e.changeSubmit("ruleForm")}}},[e._v("提交")])],1)],1)],1)},n=[],l=(a(1703),a(3822));const c={validateAccount(e,s,r){s.trim().length>20?r(new Error("账号长度不超过20！")):s.trim().length<=0?r(new Error("请输入账号")):r()},validatePassword(e,s,r){s.trim().length>20?r(new Error("密码长度不超过20！")):s.trim().length<=0?r(new Error("请输密码")):r()},validateNewPassword(e,s,r){s.trim().length>20?r(new Error("密码长度不超过20！")):s.trim().length<=0?r(new Error("请输密码")):s.trim().length<8?r(new Error("密码长度不能小于8")):r()}};var u=a(5096),w={name:"ChangePassword",data(){let e=(e,s,r)=>{s.trim()!==this.formData.newPassword.trim()?r(new Error("两次输入密码不一致！")):s.trim().length<=0?r(new Error("请再次输密码")):r()};return{formData:{account:"",oldPassword:"",newPassword:"",confirmPW:""},rules:{account:[{validator:c.validateAccount,trigger:"blur"}],oldPassword:[{validator:c.validatePassword,trigger:"blur"}],newPassword:[{validator:c.validateNewPassword,trigger:"blur"}],confirmPW:[{validator:e,trigger:"blur"}]},eyes:{hide:a(6913),show:a(9440)},eyesShow:{isShow1:!1,isShow2:!1,isShow3:!1},clearShow:{isClear:!1,isClear1:!1,isClear2:!1,isClear3:!1}}},methods:{...(0,l.OI)("login",["switchForm"]),handleCancel(){this.switchForm(!1)},changeSubmit(){this.$refs["formData"].validate((e=>{if(e){let e={username:this.formData.account,password:this.formData.oldPassword,newPassword:this.formData.newPassword};u.j.changePassword(e).then((e=>{console.log(e),e.data.code===this.$statusCode.SUCCESS&&(this.$message({message:"密码修改成功，请使用新密码重新登录",type:"success"}),this.handleCancel())}))}}))}}},m=w,d=a(1001),h=(0,d.Z)(m,i,n,!1,null,null,null),f=h.exports,p=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login-form"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":""}},[s("el-form-item",{attrs:{prop:"username"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.username&&e.clearShow.isClear1,expression:"ruleForm.username && clearShow.isClear1"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.ruleForm.username=""}}}),s("el-input",{attrs:{type:"text",placeholder:"请输入账号"},on:{focus:function(s){e.clearShow.isClear1=!0},blur:function(s){e.clearShow.isClear1=!1},input:function(s){return e.handleValidate()}},model:{value:e.ruleForm.username,callback:function(s){e.$set(e.ruleForm,"username",s)},expression:"ruleForm.username"}})],1),s("el-form-item",{staticClass:"password",attrs:{prop:"password"}},[s("img",{class:e.isShow?"eye-img eye-show":"eye-img eye-hide",attrs:{src:e.isShow?e.eyes.show:e.eyes.hide},on:{click:function(s){e.isShow=!e.isShow}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.password&&e.clearShow.isClear2,expression:"ruleForm.password && clearShow.isClear2"}],staticClass:"input-clear",attrs:{src:a(2498)},on:{mousedown:function(s){e.ruleForm.password=""}}}),s("el-input",{attrs:{type:e.isShow?"text":"password",placeholder:"请输入密码"},on:{focus:function(s){e.clearShow.isClear2=!0},blur:function(s){e.clearShow.isClear2=!1},input:function(s){return e.handleValidate()}},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.submitForm()}},model:{value:e.ruleForm.password,callback:function(s){e.$set(e.ruleForm,"password",s)},expression:"ruleForm.password"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitForm()}}},[e._v("登录")])],1)],1),s("span",{staticClass:"change-pw",on:{click:function(s){return e.changeForm()}}},[e._v("修改密码")])],1)},g=[],C={name:"LoginForm",data(){return{ruleForm:{username:"swx1125250",password:""},rules:{username:[{validator:c.validateAccount,trigger:"blur"}],password:[{validator:c.validatePassword,trigger:"blur"}]},eyes:{hide:a(6913),show:a(9440)},isShow:!1,clearShow:{isClear1:!1,isClear2:!1}}},methods:{...(0,l.OI)("login",["switchForm"]),changeForm(){this.switchForm(!0)},keyDown(){13==e.keyCode&&this.submitForm()},submitForm(){this.$refs["ruleForm"].validate((e=>{e&&u.j.login(this.ruleForm).then((e=>{e.data.code===this.$statusCode.LOGIN_FAILED?(this.rules.username=[{validator:function(e,s,r){r(new Error(" "))}}],this.rules.password=[{validator:function(s,r,a){a(new Error(e.data.msg))}}],this.$refs["ruleForm"].validateField("username"),this.$refs["ruleForm"].validateField("password")):e.data.code===this.$statusCode.SUCCESS&&(sessionStorage.setItem("token",e.headers.token),this.$router.push("/workbench/task"))}))}))},handleValidate(){this.rules.username=[{validator:c.validateAccount,trigger:"blur"}],this.rules.password=[{validator:c.validatePassword,trigger:"blur"}],this.$refs["ruleForm"].clearValidate()}}},S=C,v=(0,d.Z)(S,p,g,!1,null,"caa2cb62",null),y=v.exports,P={name:"login",components:{ChangePassword:f,LoginForm:y},data(){return{isChange:!1}},computed:{...(0,l.rn)("login",{changePassword:"changePassword"})},methods:{}},b=P,F=(0,d.Z)(b,o,t,!1,null,"70832d4b",null),D=F.exports},2498:function(e,s,r){e.exports=r.p+"img/clear.cb0adf9a.svg"},6913:function(e,s,r){e.exports=r.p+"img/hide.e70d24eb.svg"},2170:function(e,s,r){e.exports=r.p+"img/loginBg.903214b8.svg"},9440:function(e,s,r){e.exports=r.p+"img/show.21cb0a32.svg"}}]);
//# sourceMappingURL=779.1bc66687.js.map